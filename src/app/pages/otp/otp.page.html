<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/auth"></ion-back-button>
    </ion-buttons>
    <ion-title>التحقق من رقم الجوال</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="otp-container">
    <div class="logo-container">
      <img src="assets/logo.png" alt="App Logo" class="app-logo">
    </div>

    <h2 class="otp-title">التحقق من رقم الجوال</h2>
    <p class="otp-subtitle">
      تم إرسال رمز التحقق إلى 
      <strong *ngIf="mobileNumber">{{ mobileNumber }}</strong>
    </p>

    <form [formGroup]="otpForm" (ngSubmit)="verifyOtp()">
      <ion-item class="otp-input">
        <ion-label position="floating">رمز التحقق</ion-label>
        <ion-input type="number" formControlName="otp" maxlength="6" placeholder="أدخل رمز التحقق المكون من 4-6 أرقام"></ion-input>
      </ion-item>
      <div class="validation-error" *ngIf="otpForm.get('otp')?.invalid && otpForm.get('otp')?.touched">
        <span *ngIf="otpForm.get('otp')?.errors?.['required']">رمز التحقق مطلوب</span>
        <span *ngIf="otpForm.get('otp')?.errors?.['pattern']">يجب أن يتكون رمز التحقق من 4-6 أرقام</span>
      </div>

      <ion-button expand="block" type="submit" [disabled]="otpForm.invalid || isLoading" class="otp-button">
        <span *ngIf="!isLoading">تحقق</span>
        <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
      </ion-button>
    </form>

    <div class="otp-footer">
      <p>لم تتلق الرمز؟ <a (click)="sendOtp()">إرسال مرة أخرى</a></p>
    </div>
  </div>
</ion-content>