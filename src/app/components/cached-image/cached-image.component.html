<div class="cached-image-container">
  <!-- Loading spinner -->
  <ion-spinner *ngIf="isLoading && spinner" 
               [name]="'circular'" 
               [color]="spinnerColor" 
               class="loading-spinner"></ion-spinner>
  
  <!-- Placeholder when loading -->
  <div *ngIf="isLoading && loadingPlaceholder && !spinner" class="image-placeholder"></div>
  
  <!-- Fallback image (shown when error occurs) -->
  <img *ngIf="hasError" 
       [src]="fallbackSrc" 
       [alt]="alt"
       class="cached-image fallback-image"
       (error)="usePlaceholderFallback()">
  
  <!-- Actual image (only shown when loaded and no error) -->
  <img *ngIf="!hasError" 
       [src]="imageUrl" 
       [alt]="alt" 
       [style.display]="isLoading ? 'none' : 'block'"
       (error)="handleImageError()"
       class="cached-image">
</div>